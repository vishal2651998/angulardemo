<div *ngIf="loading" class="profile-loader"><img src="assets/images/loading.svg" alt="Loader" /></div>
<div *ngIf="!loading">
    <div *ngIf="pageRefresh" (click)="tabonPageRefresh()" class="new-button-top">
        <span  class="new-button-div"><img class="new-button-div-img" src="assets/images/thread-detail/thread-notifiy-icon.png" alt="Loader" />&nbsp;&nbsp;Tap to get new updates</span>
        <!--span class="th-badge-content"><span class="text">{{this.postNotificationCount}}</span></span-->
    </div>
                        
    <div class="th-error-div" *ngIf="threadViewError"><div class="error-msg">{{threadViewErrorMsg}}</div></div> 
    <div  *ngIf="!threadViewError">
    <div id="header" class="detail-page-header">
        <app-product-header class="hide" [pageData]="headerData"></app-product-header>
        <app-thread-detail-header [pageData]="headerData" (threadHeaderActionEmit)="threadHeaderAction($event)"></app-thread-detail-header>    
    </div>  
    
    <div class="thread-detail-section">
        <div *ngIf="newLeftCol" ><p-messages [(value)]="msgs1" [enableService]="false"></p-messages></div>
        <div *ngIf="!teamSystem" class="th-outer-col th-outer-col-1" [ngClass]="{ 'col-width20' : newLeftCol }">
            <div *ngIf="newLeftCol" class="tech-support-outer" [style.height]="'calc(100vh - '+innerHeightLtNew+'px)'" >
                <div class="ps" [perfectScrollbar]="sconfig">
                    <div class="ts-inner-cont">
                        <div class="top-row">
                            <img class="top-img" src="assets/images/tech-support/tech-support-head-img.png" width="29" height="18" alt="" />
                            <span class="top-text">Tech Support</span>
                        </div>
                        <div class="center-row">
                            <div class="center-row-inner">
                                <div class="center-row-lt">
                                    <img src="assets/images/thread-detail/ts-status.png" alt="" />                           
                                </div>
                                <div class="center-row-rt">
                                    <span class="placeholder-text">Status</span>
                                    <span class="thread-status" [ngStyle]="{ 'background-color' : threadViewData.threadStatusBgColor, 'color' : threadViewData.threadStatusColorValue }">{{threadViewData.threadStatus}}</span>
                                </div>
                            </div>
                            <div class="center-row-inner">
                                <div class="center-row-lt">
                                    <img src="assets/images/thread/tech-user-icon.png" alt="" />                           
                                </div>
                                <div class="center-row-rt">
                                    <span class="placeholder-text">Assigned to</span>
                                    <div class="right-row">
                                       
                                        <div class="assign-btn" tooltipClass="techsupport-tt" container="body"
                                        triggers="click" placement="bottom" [ngbTooltip]="moreaction"
                                        #ttchat="ngbTooltip">
                                            <img src="assets/images/thread-detail/tech-reassign.png" alt="" /> 
                                            <span class="a-text" *ngIf="!assignedToId" >Assign</span>
                                            <span class="a-text" *ngIf="assignedToId">Re-assign</span>
                                        </div>
                                        <ng-template #moreaction>
                                            <div class="tooltip-ts-mo-div">
                                                <ul class="more-actions">
                                                    <li *ngIf="assignedToId != userId" class="cursor active tooltip-ts-mo-new" (click)="actionStatus('assignme');"><img src="assets/images/tech-support/tech-support-assign.png" alt="View">&nbsp;&nbsp;Assign to me</li>
                                                    <li class="cursor active tooltip-ts-mo-new" (click)="actionStatus('assignmember');"><img src="assets/images/tech-support/tech-support-assign.png" alt="View">&nbsp;&nbsp;Assign to team member</li>
                                                </ul>
                                            </div>
                                        </ng-template>   
                                    </div>
                                    <span *ngIf="assignedToId == ''" class="team-text mt-3" style="color:#bbbec1"><i>None</i></span>
                                    <div class="pro-row"  *ngIf="assignedToId != ''">
                                        <span class="pro-img">
                                            <img onerror="this.src='assets/images/thumb_profile_image.png'" class="th-img" [src]="assignedToProfile">
                                        </span>
                                        <!-- <span class="status status2"></span> -->
                                        <span class="pro-name">{{assignedToName}}</span>
                                    </div>                                                                        
                                </div>
                            </div>
                            <div class="center-row-inner">
                                <div class="center-row-lt">
                                    <img src="assets/images/thread-detail/at-tag.png" alt="" />                           
                                </div>
                                <div class="center-row-rt">
                                    <span class="placeholder-text">Tagged</span>
                                    <div class="right-row" *ngIf="assignedToId != ''">
                                        <div class="assign-btn" (click)="tapontagUsers('thread')">
                                            <img src="assets/images/thread-detail/at-mention-15.png" alt="" /> 
                                            <span class="a-text">Tag Users</span>                                            
                                        </div>
                                    </div>
                                    <div class="setHeight">
                                        <div class="ps" [perfectScrollbar]="sconfig"> 
                                            <span [ngClass]="{'hide': threadAssignedUsersListNew.length > 0}" class="team-text mt-3" style="color:#bbbec1"><i>None</i></span>
                                            <div *ngIf="threadAssignedUsersListNew && threadAssignedUsersPopupResponse" class="selected-users selected-users-bg" [ngClass]="{'hide': threadAssignedUsersListNew.length < 1}">                                                   
                                                <div class="pro-row" *ngFor="let u of threadAssignedUsersListNew; let i = index;">
                                                    <span class="pro-img">
                                                        <img onerror="this.src='assets/images/thumb_profile_image.png'" class="th-img" [src]="u.pImg">
                                                    </span>
                                                    <!--span class="remove-div"><span class="remove-tag" (click)="removeE1scSelection(u.id,'thread')"></span></span-->
                                                    <!--span class="status status2"></span-->
                                                    <span class="pro-name" title="{{u.uName}}">{{u.uName}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                                                                       
                                </div>
                            </div>
                            <div class="center-row-inner">
                                <div class="center-row-lt">
                                    <img src="assets/images/thread-detail/level-status.png" alt="" />                           
                                </div>
                                <div class="center-row-rt">
                                    <span class="placeholder-text">Level Status</span>
                                    <span *ngIf="threadViewData.escalationFlag == ''" class="team-text mt-3" style="color:#bbbec1"><i>None</i></span>
                                    <span *ngIf="threadViewData.escalationFlag != ''" class="level-status">
                                        <img src="assets/images/thread-detail/level-status-icon.png" alt="" />
                                        <span class="level-status-text">{{threadViewData.escalationFlag}}</span> 
                                    </span>
                                </div>
                            </div> 
                            <div class="center-row-inner">
                                <div class="center-row-lt">
                                    <img src="assets/images/thread-detail/tech-team.png" alt="" />                           
                                </div>
                                <div class="center-row-rt" style="border:none;">
                                    <span class="placeholder-text">Team</span>
                                    <span class="team-text" *ngIf="threadViewData.assignedTeam != ''">{{threadViewData.assignedTeam}}</span>
                                    <span class="team-text" *ngIf="threadViewData.assignedTeam == ''" style="color:#bbbec1"><i>None</i></span>
                                </div>
                            </div>                           
                        </div>
                    </div>
                </div>                
            </div>
        </div>
        
        <div class="th-outer-col th-outer-col-2" [ngClass]="{'col-expand': rightPanel && !newLeftCol, 'col-collapse': !rightPanel && !newLeftCol, 'col-expand-cwidth': rightPanel && newLeftCol, 'col-collapse-cwidth': !rightPanel && newLeftCol, 'th-outer-col-2-ms': teamSystem}">
            <div [style.height]="'calc(100vh - '+innerHeightNew+'px)'">
                <div #top id="step" class="ps thread-post" (scroll)="scrolled($event)" [perfectScrollbar]="sconfig" >  

                    <button style="visibility: hidden;" #print printTitle="Thread View" printSectionId="mytodosItemsId" ngxPrint styleSheetFile="assets/print.css" >Print</button> 
                    <div id="mytodosItemsId" #tdpage class="thread-detail-page">                        
                        <!-- notification -->
                        <div *ngIf="nloading" class="post-div th-notification-loader-outer">
                            <div class="post-div-col post-div-left">                                
                                <div class="th-notification-loader">
                                    <img src="assets/images/loading.svg" alt="Loader" />
                                </div>                                                                                     
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div>
                       <!-- notification -->
                        <app-thread-detail-view (activePosition)="setActivePosition($event)" (threadTranslateActionEmit)="threadTranslateAction($event)" ></app-thread-detail-view>                                                           
            
                        <div class="post-div" *ngIf="threadRemindersData!=''">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-view">
                                      <div class="reminder-view mTopm">
                                          <div class="reminder-row" *ngFor="let trdata of threadRemindersData;" >
                                              <p *ngIf="trdata.title != ''" class="reminder-title">{{trdata.title}}</p>
                                              <div class="reminder-date"><img src="assets/images/thread-detail/thread-view-reminder.png"> <span>Reminder sent on {{trdata.createdOn}}</span></div>                                                                                               
                                          </div>
                                      </div>                             
                                </div>                                                 
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div>

                        <div class="post-div" *ngIf="postFixDataLength>0">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-view fixes-view first-div">
                                      <div class="seperater">
                                         <img class="lt-img" src="assets/images/thread-detail/dotted-fix-img.png">
                                         <span class="ct-text ct-text-white" *ngIf="postFixDataLength>1">Fixes</span>
                                         <span class="ct-text ct-text-white" *ngIf="postFixDataLength==1">Fix</span>
                                         <span class="rt-dot rt-dot-white">&nbsp;</span>
                                      </div>                                                 
                                </div>                                
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div>

                        <div class="fix-div">
                            <div *ngFor="let post of postFixData; let i = index;" class="post-div fix-div-{{post.postId}}">                               
                                <div class="post-div-col post-div-left">                                
                                    <div *ngIf="post.postView" class="post-view fixes-view pid-{{post.postId}}">                                
                                        <div class="post-row display-table">
                                            <div class="display-tablecell post-col post-col1"><div class="post-profile-img">
                                                <!--span (click)="taponprofileclick(post.userId)" class="rounded-circle cursor-pointer" [ngStyle]="{'background-image': 'url(' + post.profileImage + ')'}"></span-->
                                                <img (click)="taponprofileclick(post.userId)" class="post-p-img" [src]="post.profileImage" onerror="this.src='assets/images/thumb_profile_image.png'" />                                
                                                    
                                                <span class="availability-status availability-status{{post.availability}}"></span></div></div>
                                            <div class="display-tablecell post-col post-col2">
                                                <div class="post-head display-table">
                                                    <div class="display-tablecell post-head-col post-head-col1">  
                                                        <div class="post-head-inner-col">
                                                            <div class="post-head-inner-col1">                                                                
                                                                <span class="name-text name-text-white cursor-pointer" (click)="taponprofileclick(post.userId)">
                                                                    <span class="profile-topbadge-user-pview1" *ngIf="post.badgeTopUser"> <img  src="assets/images/thread/crownicon.svg"/></span>{{post.userName}}
                                                                </span>      
                                                                <span class="title-text th-head-inline title-text-white" *ngIf="post.userRoleTitle != undefined" [ngClass]="{ 'marginTop16' : post.threadOwnerLabel, 'marginTop8' : !post.threadOwnerLabel }" title="{{post.userRoleTitle}}"><span class="truncate1">{{post.userRoleTitle}}<span style="padding:0 ;" *ngIf="!post.threadOwnerLabel">,</span></span></span> 
                                                                <span *ngIf="post.threadOwnerLabel" class="thread-owner-label thread-owner-label-white">Thread Owner</span>                                                                                                                                 
                                                                <span class="posted-text posted-text-white" [ngClass]="{ 'marginTop12' : post.threadOwnerLabel && post.userRoleTitle != undefined, 'marginTop6' : !post.threadOwnerLabel && post.userRoleTitle != undefined }" >{{post.postedFrom}}</span>
                                                            </div>                                                            
                                                        </div>                                    
                                                    </div>
                                                    
                                                    <div class="display-tablecell post-head-col post-head-col2">
                                                        <span class="th-date-text post-date-text post-date-text-white">{{post.postCreatedOn}}</span>                                                            
                                                    </div>

                                                </div>
                                                <div class="post-cont post-cont-fixes-{{post.postStatus}}">
                                                    <p class="post-desp" [innerHTML]="post.contentWeb"></p>
                                                
                                                    <!-- Attachment List-->
                                                    <app-attachment-view *ngIf="!post.attachmentLoading" [loading]="post.attachmentLoading" [action]="post.action" [dynamicGid]="'0'+post.postId" [access]="pageAccess"  [attachments]="post.attachments" ></app-attachment-view>
                                                    <!-- Attachment List-->

                                                    <div [ngClass]="{ 'table-row4-border' : post.uploadContents.length == 0 }" class="table-row4 cursor-pointer" (click)="threadDashboarUserList('thread-dashboard','like',post.threadId,post.postId,'0'); $event.stopPropagation();"> 
                                                        <div class="display-table row4" >
                                                            <div class="display-tablecell row4-col1">
                                                                <div class="icons-div arrow-tt-hide">
                                                                    <span popoverClass="custom-tooltip menu-tooltip" [ngbPopover]="like" popoverTitle="Like" placement="bottom" triggers="hover"  class="icon icon-like setOpacity5" [ngStyle]="{'background-image': 'url('+post.likeImg+')'}"></span>                                                                
                                                                    <span class="icon-count-text">{{post.likeCountVal}}<span>&nbsp;&nbsp;{{post.likeCountValText}}</span></span>
                                                                    <ng-template #like></ng-template>
                                                                </div>                                                      
                                                            </div>                                                        
                                                            <div class="display-tablecell row4-col2 ">                                                                                                                            
                                                                <!--div *ngIf="!msTeamAccessMobile" class="icons-div icon-left">
                                                                    <span title="Flag" class="icon icon-thread-flag"></span>                                
                                                                </div-->
                                                                <div class="icons-div icon-left" *ngIf="post.postType != '' && (post.postType == 'Fix' || post.postType == 'fix')">
                                                                    <span class="proposed-bulb-border" *ngIf="(post.postStatus == '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)"><span title="Post Status" class="icon icon-thread-bstatus{{post.postStatus}}"></span></span>
                                                                    <span *ngIf="(post.postStatus != '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)"><span title="Post Status" class="icon icon-thread-bstatus{{post.postStatus}} "></span></span>
                                                                    <span *ngIf="((closeStatus == 1) || ((userId != threadUserId && !specialOwnerAccess && userId != post.userId) || (userId != threadUserId && !specialOwnerAccess && userId == post.userId) || ((this.userId == this.threadUserId || specialOwnerAccess) && userId == post.userId)))" title="Post Status" class="icon icon-thread-bstatus{{post.postStatus}}" ></span>                                                               
                                                                </div>  
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                </div>                                                                                        
                                            </div>
                                        </div>
                                    </div>                                               
                                </div>
                                <div class="post-div-col post-div-right thread-detail-scroll-to scrollbar scrollbar-primary thin" [ngClass]="{ 'setOpacity3' : post.postLoading }">
                                    <div class="edit-history-div hide" *ngIf="post.isEdited=='1'">
                                        <div class="table-row2 hide">
                                            <div class="problem-row setPaddingTop1">
                                                <div class="problem-col-lt thread-history-date"></div>
                                                <div class="problem-col-rt w86">
                                                    <p class="edit-text1">Edited On</p>
                                                    <p class="edit-text2">{{post.editHistory[post.editHistory.length-1].updatedOnNew}}</p>      
                                                </div> 
                                            </div>
                                            <div class="problem-row setPaddingTop2">
                                                <div class="problem-col-lt thread-history-edituser"><span class="thread-history-edituser-img rounded-circle" [ngStyle]="{'background-image': 'url(' + post.editHistory[post.editHistory.length-1].profileImage + ')'}"></span></div>
                                                <div class="problem-col-rt w86">
                                                    <p class="edit-text1">Edited By</p>
                                                    <p class="edit-text2">{{post.editHistory[post.editHistory.length-1].userName}}</p>      
                                                </div> 
                                            </div>
                                        </div>  
                                    </div>
                                </div>
                            </div> 
                        </div>

                        <div class="post-div" *ngIf="collabticDomain && postDataLength>0">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-view first-div">
                                    <div class="seperater">
                                        <img class="lt-img" src="assets/images/thread-detail/dotted-post-img.png">
                                        <span class="ct-text comment-text" *ngIf="postData.length == 1">Comment</span>
                                        <span class="ct-text comment-text" *ngIf="postData.length > 1 ">Comments</span>
                                        <span class="rt-dot comment-dot">&nbsp;</span>
                                    </div>                                                 
                                </div>
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>                            
                        </div>

                        <div *ngFor="let post of postData; let i = index;" class="reply-{{post.postId}}">                            
                           <div class="post-div post-comment-div" id="notify-{{post.postId}}" *ngIf="(collabticDomain && (post.deleteFlag == '0' || post.deleteFlag == '1')) || (!collabticDomain)"> 
                                <div *ngIf="post.postLoading" class="thread-post-loader"><img src="assets/images/loading.svg" alt="Loader" /></div>
                                <div class="post-div-col post-div-left" [ngClass]="{ 'setOpacity3' : post.postLoading }">                                
                                    <div class="post-view" *ngIf="(collabticDomain && post.deleteFlag == '1')">
                                        <div class="post-row" >
                                            <div class="delete-comment-row">
                                                <img class="img" src="assets/images/thread-detail/delete-comment.png" alt="delete comment" />
                                                <span class="text">&nbsp;&nbsp;Comment deleted</span>
                                            </div>                                           
                                        </div>                                
                                    </div>
                                    <div *ngIf="(!collabticDomain && post.postView) || (collabticDomain && post.postView && post.deleteFlag == '0')" class="post-view pid-{{post.postId}}" [ngClass]="{ 'padding-bottom' : post.postNew }">                                
                                        <div class="post-row display-table">
                                            <div class="display-tablecell post-col post-col1"><div class="post-profile-img">
                                                <!--span (click)="taponprofileclick(post.userId)" class="rounded-circle cursor-pointer" [ngStyle]="{'background-image': 'url(' + post.profileImage + ')'}"></span-->
                                                <img (click)="taponprofileclick(post.userId)" class="post-p-img" [src]="post.profileImage" onerror="this.src='assets/images/thumb_profile_image.png'" />                                
                                                
                                                <span class="availability-status availability-status{{post.availability}}"></span></div></div>
                                            <div class="display-tablecell post-col post-col2">
                                                <div class="post-head display-table">
                                                    <div class="display-tablecell post-head-col post-head-col1">  
                                                        <div class="post-head-inner-col">
                                                            <div class="post-head-inner-col1">                                                                
                                                                <span class="name-text cursor-pointer" (click)="taponprofileclick(post.userId)">
                                                                    <span class="profile-topbadge-user-pview1" *ngIf="post.badgeTopUser"> <img  src="assets/images/thread/crownicon.svg"/></span>{{post.userName}}
                                                                </span>                                                                
                                                                <span class="title-text th-head-inline" *ngIf="post.userRoleTitle != undefined" [ngClass]="{ 'marginTop16' : post.threadOwnerLabel, 'marginTop8' : !post.threadOwnerLabel }" title="{{post.userRoleTitle}}"><span class="truncate1">{{post.userRoleTitle}}<span style="padding:0 ;" *ngIf="!post.threadOwnerLabel">,</span></span></span>                                                                    
                                                                <span *ngIf="post.threadOwnerLabel" class="thread-owner-label">Thread Owner</span>
                                                                <span class="posted-text" [ngClass]="{ 'marginTop12' : post.threadOwnerLabel && post.userRoleTitle != undefined, 'marginTop6' : !post.threadOwnerLabel && post.userRoleTitle != undefined }">{{post.postedFrom}}</span>
                                                            </div>                                                           
                                                        </div>                                    
                                                    </div>                                                    
                                                    <div class="display-tablecell post-head-col post-head-col2">
                                                        <span class="th-date-text post-date-text">{{post.postCreatedOn}}</span>                                                        
                                                        <span title="Edit" *ngIf="post.editDeleteAction" (click)="editPostAction(post.postId)"><img class="post-edit-img cursor-pointer" src="assets/images/thread-detail/post-edit.png" /></span>
                                                        <span title="Delete" *ngIf="post.editDeleteAction" (click)="postDeleteConfirm(post.postId)"><img class="post-delete-img cursor-pointer" src="assets/images/thread-detail/post-delete.png" /></span>
                                                        <span title="Translate" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip translate-tooltip" triggers="click" [autoClose]="true" placement="bottom-left" [ngbTooltip]="SelectlanguageContent"><img class="post-delete-img cursor-pointer" src="assets/images/thread-detail/post-lang-icon.png" /></span>                                                       
                                                        
                                                        <ng-template #SelectlanguageContent>
                                                            <div class="thread-owner-reply div-f-border">
                                                                <div class="display-table label-tt-cont" (click)="changeTranslateLanguage(post.transText,post.contentTranslate,i,'comment','')">
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="32" height="32" src="assets/images/thread-detail/post-lang-translate.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">{{post.transText}}</span>
                                                                </div>                                                                                                                     
                                                            </div> 
                                                            <div class="thread-owner-reply div-s-border">
                                                                <div class="display-table label-tt-cont" (click)="changeTranslateLanguage('settings',post.contentTranslate,i,'comment','')">
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="32" height="32" src="assets/images/thread-detail/post-lang-settings.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">Language Settings</span>
                                                                </div>                                                                                                                     
                                                            </div>                                                          
                                                        </ng-template>                                                   
                                                    </div>

                                                </div>
                                                <div class="post-cont" [ngClass]=" { 'active' : post.postNew, 'zendesk' : post.fromzenDesk, 'post-cont-active' : post.newComment  } ">
                                                    <p class="post-desp" [innerHTML]="post.contentWeb"></p>
                                                
                                                    <!-- Attachment List-->
                                                    <app-attachment-view *ngIf="!post.attachmentLoading" [loading]="post.attachmentLoading" [action]="post.action" [dynamicGid]="post.postId" [access]="pageAccess"  [attachments]="post.attachments"></app-attachment-view>
                                                    <!-- Attachment List-->

                                                    <div [ngClass]="{ 'table-row4-border' : post.uploadContents.length == 0 }" class="table-row4 cursor-pointer" (click)="threadDashboarUserList('thread-dashboard','like',post.threadId,post.postId,'0'); $event.stopPropagation();"> 
                                                        <div class="display-table row4" >
                                                            <div class="display-tablecell row4-col1">
                                                                <div class="icons-div arrow-tt-hide">
                                                                    <span popoverClass="custom-tooltip menu-tooltip" [ngbPopover]="like" popoverTitle="Like" placement="bottom" triggers="hover" class="icon icon-like setOpacity5" *ngIf="post.actionDisable" [ngStyle]="{'background-image': 'url('+post.likeImg+')'}"></span>
                                                                    <span popoverClass="custom-tooltip menu-tooltip" [ngbPopover]="like" popoverTitle="Like" placement="bottom" triggers="hover" class="icon icon-like cursor-pointer" *ngIf="!post.actionDisable" (click)="socialAction('like', post.likeStatus, post.postId); $event.stopPropagation();" [ngStyle]="{'background-image': 'url('+post.likeImg+')'}"></span>
                                                                    <span class="icon-count-text">{{post.likeCountVal}}<span>&nbsp;&nbsp;{{post.likeCountValText}}</span></span>
                                                                    <ng-template #like></ng-template>
                                                                </div> 
                                                                <div *ngIf="replyEnable" [ngClass]=" { 'hide' : post.postNew , 'setOpacity3' : closeStatus == 1 } " class="reply-button-div" (click)="nestedReply(post.postId); $event.stopPropagation();">
                                                                    <span class="post-replies-img"></span>
                                                                    <span class="post-replies-text">Reply</span>
                                                                </div>                                                     
                                                            </div>                                                        
                                                            <div class="display-tablecell row4-col2 ">                                                                                                                           
                                                                <!--div *ngIf="!msTeamAccessMobile" class="icons-div icon-left">
                                                                    <span title="Flag" class="icon icon-thread-flag"></span>                                
                                                                </div-->
                                                                <div class="icons-div icon-left" *ngIf="post.postType != '' && (post.postType == 'Fix' || post.postType == 'fix')">
                                                                    <span class="proposed-bulb-border" *ngIf="(post.postStatus == '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)"><span title="Post Status" class=" cursor-pointer icon icon-thread-bstatus{{post.postStatus}} " tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="bottom" [ngbTooltip]="solutionFixStatus" (click)="changeTooltip(post.postId);$event.stopPropagation();"></span></span>
                                                                    <span *ngIf="(post.postStatus != '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)"><span title="Post Status" class=" cursor-pointer icon icon-thread-bstatus{{post.postStatus}} " tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="bottom" [ngbTooltip]="solutionFixStatus" (click)="$event.stopPropagation();"></span></span>
                                                                    <span *ngIf="((closeStatus == 1) || ((userId != threadUserId && !specialOwnerAccess && userId != post.userId) || (userId != threadUserId && !specialOwnerAccess && userId == post.userId) || ((this.userId == this.threadUserId || specialOwnerAccess) && userId == post.userId)))" title="Post Status" class="icon icon-thread-bstatus{{post.postStatus}}" ></span>  
                                                                    <div class="manual-tt-outer" *ngIf="post.postStFlag && (post.postStatus == '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != post.userId)">
                                                                        <div class="manual-tt">
                                                                            <div class="arrow-up"></div>
                                                                            <div class="innerDiv">
                                                                                <span>Tap bulb to change fix status</span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>                                                            
                                                                <ng-template #solutionFixStatus>
                                                                    <div *ngIf="threadOwner" class="thread-owner-reply">   
                                                                        <div class="display-table label-tt-cont" (click)="setSolutionStatus('1',post.postId, post.postStatus); $event.stopPropagation();"  >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Fixed the Problem</span>
                                                                        </div>
                                                                        <div class="display-table label-tt-cont" (click)="setSolutionStatus('2',post.postId, post.postStatus); $event.stopPropagation();" >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/possible-fix.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Helpful/Possible Fix</span>
                                                                        </div>
                                                                        <div class="display-table label-tt-cont" (click)="setSolutionStatus('3',post.postId, post.postStatus); $event.stopPropagation();" >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/did-not-fix.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Did not fix the problem</span>
                                                                        </div>
                                                                    </div>                                                                
                                                                </ng-template>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- // New Div -->                                                
                                                <div class="nested-reply-div"  *ngIf="post.postNew">  
                                                    <div class="post-new post-reply-new">  
                                                        <div class="thread-head post-head display-table">
                                                            <div class="display-tablecell thread-head-col1 post-head-col1">
                                                                <div class="display-table">
                                                                    <div class="display-tablecell">
                                                                        <div class="th-head-img" (click)="taponprofileclick(userId)">
                                                                            <img class="th-img" [src]="loginUserProfileImg" onerror="this.src='assets/images/thumb_profile_image.png'" />                                
                                                                            <!--span class="rounded-circle cursor-pointer" (click)="taponprofileclick(userId)" [ngStyle]="{'background-image': 'url(' + loginUserProfileImg + ')'}"></span-->
                                                                            <span class="availability-status availability-status{{loginUserAvailability}}"></span>
                                                                        </div>                            
                                                                    </div>
                                                                    <div class="display-tablecell th-head-title">
                                                                        <span class="th-head-text1 th-head-inline cursor-pointer" (click)="taponprofileclick(userId)">{{loginUsername}}</span>
                                                                        <span class="th-head-text2 th-head-inline new-head-text2">{{loginUserRole}}</span>                                                    
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="display-tablecell post-head-col2">
                                                                <div class="post-button post-button-white cursor-pointer" (click)="cancelNestedReply(post.postId)">
                                                                    <span class="post-btn-text cancel-btn-text cursor-pointer">Cancel</span>
                                                                    <img class="post-btn-img cancel-btn-img cursor-pointer" src="assets/images/parts/cancel-icon.png" >
                                                                </div> 
                                                                <div *ngIf="noReplyAccess"  class="post-button post-button-red setOpacity3" > 
                                                                    <span class="post-btn-text">Post</span>
                                                                    <span class="new-post-img"><img class="post-btn-img post-btn-img-np" src="assets/images/thread-detail/new-post.png"></span>
                                                                </div>                                               
                                                                <div *ngIf="!postReplyButtonEnable && !noReplyAccess"  class="post-button post-button-red setOpacity3">
                                                                    <span class="post-btn-text">Post</span>
                                                                    <span class="new-post-img"><img class="post-btn-img post-btn-img-np" src="assets/images/thread-detail/new-post.png"></span>
                                                                </div>
                                                                <div *ngIf="postReplyButtonEnable && !techSubmmitFlag && !msTeamAccessMobile && !noReplyAccess" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="right-top" [ngbTooltip]="postSubmitContent">
                                                                    <span class="post-btn-text">Post</span>
                                                                    <span class="new-post-img"><img class="post-btn-img  post-btn-img-np" src="assets/images/thread-detail/new-post.png"></span>                                              
                                                                </div>
                                                                <div *ngIf="postReplyButtonEnable && techSubmmitFlag && !noReplyAccess" class="post-button post-button-red cursor-pointer" (click)="setPostType('Comment','0',post.postId,'nested-reply')">
                                                                    <span class="post-btn-text">Post</span>
                                                                    <span class="new-post-img"><img class="post-btn-img  post-btn-img-np" src="assets/images/thread-detail/new-post.png"></span>
                                                                </div>
                                                                <div *ngIf="postReplyButtonEnable && !techSubmmitFlag && msTeamAccessMobile  && !noReplyAccess" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="left-top" [ngbTooltip]="postSubmitContent">
                                                                    <span class="post-btn-text">Post</span>
                                                                    <span class="new-post-img"><img class="post-btn-img  post-btn-img-np" src="assets/images/thread-detail/new-post.png"></span>
                                                                </div>
                                                                <ng-template #postSubmitContent>
                                                                    <div *ngIf="postTypeAccess" class="thread-owner-reply">
                                                                        <label class="label-tt-head">Select your Post type</label>
                                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'nested-reply')">
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/post-reply.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Reply</span>
                                                                        </div>
                                                                        <div *ngIf="adminUserNotOwner" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',post.postId,'nested-reply')" >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                                        </div> 
                                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '1',post.postId,'nested-reply')"  >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Confirmed Fix</span>
                                                                        </div>
                                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '2',post.postId,'nested-reply')" >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/possible-fix.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Possible Fix</span>
                                                                        </div>                                                       
                                                                    </div>
                                                                    <div *ngIf="!postTypeAccess" class="thread-other-reply">
                                                                        <label class="label-tt-head">Are you posting a Reply or a Proposed Fix?</label>
                                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'nested-reply')" >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/post-reply.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Reply</span>
                                                                        </div>
                                                                        <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',post.postId,'nested-reply')" >
                                                                            <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                            <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                                        </div>                                                   
                                                                    </div>
                                                                </ng-template>
                                                            </div>                                        
                                                        </div>
                                                        <div class="post-new-cont">                                            
                                                            <!--<div class="post-error-msg" *ngIf="submitted && f.postDesc.errors">Enter Reply</div>-->
                                                            <div class="post-desp-div" style="width:100%;overflow:hidden">
                                                                <!--textarea matInput class="post-desp" placeholder="Enter Reply" formControlName="postDesc" [ngModel]="postDesc" autocomplete="off" maxlength="{{descMaxLen}}" (ngModelChange)="changePostDesc($event,'new')"></textarea>-->
                                                                <!--p-editor #postReplyEditor placeholder="Enter Reply" [(ngModel)]="postReplyDesc" (onTextChange)="changePostDesc($event,'nested-reply')" (onInit)="onEditorInit($event)">
                                                                    <p-header>
                                                                        <span class="ql-formats">
                                                                            <button class="ql-bold" aria-label="Bold"></button>
                                                                            <button class="ql-italic" aria-label="Italic"></button>
                                                                            <button class="ql-underline" aria-label="Underline"></button>
                                                                        
                                                                            <select title="Text Color" class="ql-color" defaultValue="rgb(0, 0, 0)">
                                                                            <option *ngFor="let c of textColorValues" value="{{c.color}}" label="{{c.color}}"></option>
                                                                            </select>
                                                                            <button class="ql-list" value="ordered"></button>
                                                                            <button class="ql-list" value="bullet"></button>
                                                                            <select title="Text Alignment" class="ql-align" >
                                                                                <option selected>Gauche</option>
                                                                                <option value="center" label="Center"></option>
                                                                                <option value="right" label="Right"></option>
                                                                                <option value="justify" label="Justify"></option>
                                                                            </select> 
                                                                        </span>
                                                                    </p-header>
                                                                </p-editor-->
                                                                <p-progressBar *ngIf="nestedPosteditorProgressUpload==1" [style]="{'height': '6px','width':'300px','text-align':'center','margin':'10px'}" mode="indeterminate"></p-progressBar>
                                                                <ckeditor placeholder="Enter Reply" [editor]="Editor" [config]="configCke"
                                                                (change)="changePostDesc($event,'nested-reply')" (drop)="dropEvent($event,'nested-reply')" 
                                                                [style]="{'height': '180px'}" 
                                                                (change)="changePostDesc($event,'nested-reply')" 
                                                                
                                                                [(ngModel)]="postReplyDesc"></ckeditor>

                                                            </div>
                                                            <div class="clear">
                                                            </div>
                                                            <div *ngIf="enableTagFlag && closeStatus!=1">
                                                            
                                                            <div class="tag-users view-tag-users cursor" (click)="tapontagUsers('reply')">
                                                                <div>
                                                                    <div class="drop-col split-col">
                                                                        <span class="split-icon "></span>
                                                                    </div>
                                                                <p-dropdown [disabled]="true"  placeholder="Tag Users"   class="input-with-icon-inside-select mat-typography" appendTo="body"  ></p-dropdown>
                                                                </div>
                                                            </div>
                                                            <div class="tag-users-list cursor">
                                                                <div *ngIf="replyAssignedUsersList && replyAssignedUsersPopupResponse" class="selected-users selected-users-bg" [ngClass]="{'hide': replyAssignedUsersList.length < 1}">
                                                                    <ul style="max-height: 76px;" class="overflow-auto p-0">
                                                                        <li *ngFor="let u of replyAssignedUsersList; let i = index;" class="p-0 mt-3">
                                                                            <span class="img" [ngStyle]="{'background-image': 'url(' +u.img+ ')'}">
                                                                                <span class="cursor remove" (click)="removeE1scSelection(u.id,'reply')"></span>
                                                                            </span>
                                                                            <span class="name text-left ml-4" title="{{u.name}}">{{u.name}}</span>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                                
                                                                
                                                        </div>
                                                            <div class="attachment-row ">
                                                                <div class="post-error-msg post-link-error" *ngIf="postReplyServerError">{{postReplyServerErrorMsg}}</div>
                                                                <app-file-attachment *ngIf="nestedPostUpload" class="attachment-file" [action]="manageAction" [apiData]="nestedPostApiData" (uploadedItems)="nestedAttachments($event)"></app-file-attachment>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>                                     
                                                </div>                                                
                                                <!-- // New Div -->

                                                 

                                            </div>
                                        </div>
                                    </div> 
                                    <div *ngIf="!post.postView" class="post-edit" > 
                                        <div class="post-view"></div>
                                        <div class="">                                              
                                            <div class="post-new remove-radius">                                            
                                                <div class="thread-head post-head display-table">
                                                    <div class="display-tablecell thread-head-col1 post-head-col1">
                                                        <div class="display-table">
                                                            <div class="display-tablecell">
                                                                <div class="th-head-img" (click)="taponprofileclick(post.userId)">
                                                                    <img class="th-img" [src]="post.profileImage" onerror="this.src='assets/images/thumb_profile_image.png'" />
                                                                    <!--span (click)="taponprofileclick(post.userId)" class="rounded-circle cursor-pointer" [ngStyle]="{'background-image': 'url(' + post.profileImage + ')'}"></span-->
                                                                    <span class="availability-status availability-status{{post.availability}}"></span>
                                                                </div>                            
                                                            </div>
                                                            <div class="display-tablecell th-head-title">
                                                                <span class="th-head-text1 th-head-inline cursor-pointer" (click)="taponprofileclick(post.userId)"><span class="profile-topbadge-user-pview2" *ngIf="post.badgeTopUser"> <img  src="assets/images/thread/crownicon.svg"/></span>{{post.userName}}</span>
                                                                <span class="th-head-text2 th-head-inline new-head-text2">{{post.userRoleTitle}}</span>                                                    
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="display-tablecell post-head-col2">
                                                        <div class="post-button post-button-white cursor-pointer" (click)="cancelPostAction(post.postId)">
                                                            <span class="post-btn-text cancel-btn-text cursor-pointer">Cancel</span>
                                                            <img class="post-btn-img cancel-btn-img cursor-pointer" src="assets/images/parts/cancel-icon.png" >
                                                        </div> 
                                                        <div *ngIf="!postSaveButtonEnable" class="post-button post-button-red setOpacity3">
                                                            <span class="post-btn-text">Save</span>
                                                            <img class="post-btn-img" src="assets/images/profile/profile-save.png">
                                                        </div>
                                                        <div *ngIf="postSaveButtonEnable && !techSubmmitFlag && !msTeamAccessMobile" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="right-top" [ngbTooltip]="postSaveContent">
                                                            <span class="post-btn-text cursor-pointer">Save</span>
                                                            <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                        </div>                                                    
                                                        <div *ngIf="postSaveButtonEnable && techSubmmitFlag" class="post-button post-button-red cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'edit')">
                                                            <span class="post-btn-text cursor-pointer">Save</span>
                                                            <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                        </div>
                                                        <div *ngIf="postSaveButtonEnable && !techSubmmitFlag && msTeamAccessMobile cursor-pointer" class="post-button post-button-red" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="left-top" [ngbTooltip]="postSaveContent">
                                                            <span class="post-btn-text cursor-pointer">Save</span>
                                                            <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                        </div>
                                                        <ng-template #postSaveContent>
                                                            <div *ngIf="postTypeAccess" class="thread-owner-reply">
                                                                <label class="label-tt-head">Select your Post type</label>
                                                                <div [ngClass]="{ 'selected-tt-cont' : post.postType == 'Comment' || post.postType == 'comment' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'edit')"  >
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/post-comment.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">Comment</span>
                                                                </div>
                                                                <div [ngClass]="{ 'selected-tt-cont' : post.postStatus == '0' && (post.postType == 'Fix' || post.postType == 'fix') }" *ngIf="adminUserNotOwner" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',post.postId,'edit')" >
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                                </div> 
                                                                <div [ngClass]="{ 'selected-tt-cont' : post.postStatus == '1' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '1',post.postId,'edit')"  >
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">Confirmed Fix</span>
                                                                </div>
                                                                <div [ngClass]="{ 'selected-tt-cont' : post.postStatus == '2' }" class="display-table label-tt-cont cursor-pointer " (click)="setPostType('Fix', '2',post.postId,'edit')" >
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/possible-fix.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">Possible Fix</span>
                                                                </div>
                                                            </div>
                                                            <div *ngIf="!postTypeAccess" class="thread-other-reply">
                                                                <label class="label-tt-head">Are you posting a Comment or a Proposed Fix?</label>
                                                                <div [ngClass]="{ 'selected-tt-cont' : post.postType == 'Comment' || post.postType == 'comment' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',post.postId,'edit')" >
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/post-comment.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">Comment</span>
                                                                </div>
                                                                <div [ngClass]="{ 'selected-tt-cont' : post.postType == 'Fix' || post.postType == 'fix' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',post.postId,'edit')" >
                                                                    <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                    <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                                </div>                                                   
                                                            </div>
                                                        </ng-template>
                                                    </div>                                        
                                                </div>
                                                <div class="post-new-cont">                                                
                                                    <!--<div class="post-error-msg" *ngIf="submitted1 && f1.postEditDesc.errors">Enter Reply</div>-->
                                                    <div class="post-desp-div">
                                                        <!--<textarea matInput class="post-desp" placeholder="Enter Reply" formControlName="postEditDesc" [ngModel]="postEditDesc" autocomplete="off" maxlength="{{descMaxLen}}" (ngModelChange)="changePostDesc($event,'edit')"></textarea>-->
                                                        <!--p-editor #postEditEditor placeholder="Enter comment" [(ngModel)]="postEditDesc" (onTextChange)="changePostDesc($event,'edit')" [style]="{'height': '180px'}">
                                                            <p-header>
                                                                <span class="ql-formats">
                                                                    <button class="ql-bold" aria-label="Bold"></button>
                                                                    <button class="ql-italic" aria-label="Italic"></button>
                                                                    <button class="ql-underline" aria-label="Underline"></button>
                                                                
                                                                    <select title="Text Color" class="ql-color" defaultValue="rgb(0, 0, 0)">
                                                                    <option *ngFor="let c of textColorValues" value="{{c.color}}" label="{{c.color}}"></option>
                                                                    </select>
                                                                    <button class="ql-list" value="ordered"></button>
                                                                    <button class="ql-list" value="bullet"></button>
                                                                    <select title="Text Alignment" class="ql-align" >
                                                                        <option selected>Gauche</option>
                                                                        <option value="center" label="Center"></option>
                                                                        <option value="right" label="Right"></option>
                                                                        <option value="justify" label="Justify"></option>
                                                                    </select>                                                                          
                                                                </span>
                                                            </p-header>
                                                        </p-editor-->
                                                        <p-progressBar *ngIf="nestedPostEditeditorProgressUpload==1" [style]="{'height': '6px','width':'300px','text-align':'center','margin':'10px'}" mode="indeterminate"></p-progressBar>
                                                        <ckeditor placeholder="Enter reply" [editor]="Editor" [config]="configCke"
                                                        (change)="changePostDesc($event,'edit')"  (drop)="dropEvent($event,'edit-reply')"
                                                        [style]="{'height': '180px'}" 
                                                        (change)="changePostDesc($event,'edit')" 
                                                        
                                                        [(ngModel)]="postEditDesc"></ckeditor>
                                                        
                                                    </div>
                                                    <div class="attachment-row ">
                                                        <div class="post-error-msg post-link-error" *ngIf="posteditServerError">{{postEditServerErrorMsg}}</div>
                                                        <app-file-attachment *ngIf="editPostUpload" class="attachment-file" [action]="manageAction" [apiData]="postEditApiData" [attachmentItems]="post.attachmentItems" [postData]="post" (uploadedItems)="editAttachments($event)"></app-file-attachment>
                                                        <app-attachment-view *ngIf="post.attachments.length > 0" [action]="post.EditAttachmentAction" [access]="pageAccess" [attachments]="post.attachmentItems" (attachmentAction)="attachmentAction($event)"></app-attachment-view>
                                                    </div>
                                                </div>  
                                            </div>
                                        </div>
                                    </div>                                                 
                                </div>
                                <div class="post-div-col post-div-right thread-detail-scroll-to scrollbar scrollbar-primary thin" [ngClass]="{ 'setOpacity3' : post.postLoading }">
                                    <div class="edit-history-div" *ngIf="post.isEdited=='1' && post.deleteFlag == '0'">
                                        <div class="table-row2">
                                            <div class="problem-row setPaddingTop1">
                                                <div class="problem-col-lt thread-history-date"></div>
                                                <div class="problem-col-rt w86">
                                                    <p class="edit-text1">Edited On</p>
                                                    <p class="edit-text2">{{post.editHistory[post.editHistory.length-1].updatedOnNew}}</p>      
                                                </div> 
                                            </div>
                                            <div class="problem-row setPaddingTop2">
                                                <div class="problem-col-lt thread-history-edituser"><span class="thread-history-edituser-img rounded-circle" [ngStyle]="{'background-image': 'url(' + post.editHistory[post.editHistory.length-1].profileImage + ')'}"></span></div>
                                                <div class="problem-col-rt w86">
                                                    <p class="edit-text1">Edited By</p>
                                                    <p class="edit-text2">{{post.editHistory[post.editHistory.length-1].userName}}</p>      
                                                </div> 
                                            </div>
                                        </div>  
                                    </div>
                                </div>
                            </div>                          
                            
                            <!-- // Heading -->
                            <!--div class="post-div" *ngIf="collabticDomain && post.nestedReplies.length>0">
                                <div class="post-div-col post-div-left"> 
                                    <div class="post-view nested-post-view first-div">
                                        <div class="seperater">
                                            <img class="lt-img" src="assets/images/thread-detail/dotted-reply-img.png">
                                            <span class="ct-text" *ngIf="post.nestedReplies.length == 1">Reply</span>
                                            <span class="ct-text" *ngIf="post.nestedReplies.length>1">Replies</span>
                                            <span class="rt-dot reply-dot">&nbsp;</span>
                                        </div>                                                 
                                    </div>
                                </div>
                                <div class="post-div-col post-div-right">&nbsp;</div>                            
                            </div--> 
                            <!-- // Heading -->
                            <div *ngFor="let npdata of post.nestedReplies; let i1 = index;">
                                <div class="post-div post-reply-div" id="notify-{{npdata.postId}}">                            
                                    <div *ngIf="npdata.postReplyLoading" class="thread-post-loader"><img src="assets/images/loading.svg" alt="Loader" /></div>
                                    <div class="post-div-col post-div-left" [ngClass]="{ 'setOpacity3' : npdata.postReplyLoading }">                                
                                        <div *ngIf="npdata.postView" class="post-view pid-{{npdata.postId}} nested-post-view">                                
                                            <div class="post-row display-table">
                                                <div class="display-tablecell post-col post-col1"><div class="post-profile-img">
                                                    <!--span (click)="taponprofileclick(npdata.userId)" class="rounded-circle cursor-pointer" [ngStyle]="{'background-image': 'url(' + npdata.profileImage + ')'}"></span-->
                                                    <img (click)="taponprofileclick(npdata.userId)" class="post-p-img" [src]="npdata.profileImage" onerror="this.src='assets/images/thumb_profile_image.png'" />                                
                                                    <span class="availability-status availability-status{{npdata.availability}}"></span></div></div>
                                                <div class="display-tablecell post-col post-col2">
                                                    <div class="post-head display-table">
                                                        <div class="display-tablecell post-head-col post-head-col1">  
                                                            <div class="post-head-inner-col">                                                                
                                                                <div class="post-head-inner-col1">                                                                    
                                                                    <span class="name-text cursor-pointer" (click)="taponprofileclick(npdata.userId)">
                                                                        <span class="profile-topbadge-user-pview1" *ngIf="npdata.badgeTopUser"> <img  src="assets/images/thread/crownicon.svg"/></span>{{npdata.userName}}
                                                                    </span>                                                                        
                                                                    <span class="title-text th-head-inline" *ngIf="npdata.userRoleTitle != undefined" [ngClass]="{ 'marginTop16' : npdata.threadOwnerLabel, 'marginTop8' : !npdata.threadOwnerLabel }" title="{{npdata.userRoleTitle}}"><span class="truncate1">{{npdata.userRoleTitle}}<span style="padding:0 ;" *ngIf="!npdata.threadOwnerLabel">,</span></span></span>   
                                                                    <span *ngIf="npdata.threadOwnerLabel" class="thread-owner-label">Thread Owner</span>                                                                                                                                        
                                                                    <span class="posted-text" [ngClass]="{ 'marginTop12' : npdata.threadOwnerLabel && npdata.userRoleTitle != undefined, 'marginTop6' : !npdata.threadOwnerLabel && npdata.userRoleTitle != undefined }" >{{npdata.postedFrom}}</span>
                                                                </div>                                                                
                                                            </div>                                    
                                                        </div>
                                                        
                                                        <div class="display-tablecell post-head-col post-head-col2">
                                                            <span class="th-date-text post-date-text">{{npdata.postCreatedOn}}</span>  
                                                            <span title="Edit" *ngIf="npdata.editDeleteAction" (click)="editPostAction(npdata.postId,'nested-reply',npdata.parentPostId)"><img class="post-edit-img cursor-pointer" src="assets/images/thread-detail/post-edit.png" /></span>
                                                            <span title="Delete" *ngIf="npdata.editDeleteAction" (click)="postDeleteConfirm(npdata.postId,'nested-reply',npdata.parentPostId)"><img class="post-delete-img cursor-pointer" src="assets/images/thread-detail/post-delete.png" /></span> 
                                                            <span title="Translate" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip translate-tooltip" triggers="click" [autoClose]="true" placement="bottom-left" [ngbTooltip]="SelectlanguageContent"><img class="post-delete-img cursor-pointer" src="assets/images/thread-detail/post-lang-icon.png" /></span>                                                       
                                                        
                                                            <ng-template #SelectlanguageContent>
                                                                <div class="thread-owner-reply div-f-border">
                                                                    <div class="display-table label-tt-cont" (click)="changeTranslateLanguage(npdata.transText,npdata.contentTranslate,i,'reply',npdata.parentPostId,i1)">
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="32" height="32" src="assets/images/thread-detail/post-lang-translate.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">{{npdata.transText}}</span>
                                                                    </div>                                                                                                                     
                                                                </div> 
                                                                <div class="thread-owner-reply div-s-border">
                                                                    <div class="display-table label-tt-cont" (click)="changeTranslateLanguage('settings',npdata.contentTranslate,i,'reply',npdata.parentPostId,i1)">
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="32" height="32" src="assets/images/thread-detail/post-lang-settings.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Language Settings</span>
                                                                    </div>                                                                                                                     
                                                                </div>                                                          
                                                            </ng-template>  

                                                        </div>
                                                    </div>
                                                    <div class="post-cont" [ngClass]="{ 'post-cont-active' : npdata.newReply, 'zendesk' : post.fromzenDesk }">
                                                        <p class="post-desp" [innerHTML]="npdata.contentWeb"></p>
                                                    
                                                        <!-- Attachment List-->
                                                        <app-attachment-view *ngIf="!npdata.attachmentLoading" [loading]="npdata.attachmentLoading" [action]="npdata.action" [dynamicGid]="npdata.postId" [access]="pageAccess"  [attachments]="npdata.attachments"></app-attachment-view>
                                                        <!-- Attachment List-->
        
                                                        <div [ngClass]="{ 'table-row4-border' : npdata.uploadContents.length == 0 }" class="table-row4 cursor-pointer" (click)="threadDashboarUserList('thread-dashboard','like',npdata.threadId,npdata.postId,'0'); $event.stopPropagation();"> 
                                                            <div class="display-table row4" >
                                                                <div class="display-tablecell row4-col1">
                                                                    <div class="icons-div arrow-tt-hide">
                                                                        <span popoverClass="custom-tooltip menu-tooltip" [ngbPopover]="like" popoverTitle="Like" placement="bottom" triggers="hover"  class="icon icon-like setOpacity5" *ngIf="npdata.actionDisable" [ngStyle]="{'background-image': 'url('+npdata.likeImg+')'}"></span>
                                                                        <span popoverClass="custom-tooltip menu-tooltip" [ngbPopover]="like" popoverTitle="Like" placement="bottom" triggers="hover"  class="icon icon-like cursor-pointer" *ngIf="!npdata.actionDisable" (click)="socialAction('like', npdata.likeStatus, npdata.postId, 'nested-reply', npdata.parentPostId); $event.stopPropagation();" [ngStyle]="{'background-image': 'url('+npdata.likeImg+')'}"></span>
                                                                        <span class="icon-count-text">{{npdata.likeCountVal}}<span>&nbsp;&nbsp;{{npdata.likeCountValText}}</span></span>
                                                                        <ng-template #like></ng-template>
                                                                    </div>                                                                                                                      
                                                                </div>                                                        
                                                                <div class="display-tablecell row4-col2 ">                                                                                                                                
                                                                    <!--div *ngIf="!msTeamAccessMobile" class="icons-div icon-left">
                                                                        <span title="Flag" class="icon icon-thread-flag"></span>                                
                                                                    </div-->
                                                                    <div class="icons-div icon-left" *ngIf="npdata.postType != '' && (npdata.postType == 'Fix' || npdata.postType == 'fix')">
                                                                        <span class="proposed-bulb-border" *ngIf="(npdata.postStatus == '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != npdata.userId)"><span title="Post Status" class=" cursor-pointer icon icon-thread-bstatus{{npdata.postStatus}} " tooltipClass="post-submit-tooltip"  container="body" triggers="click" [autoClose]="true" placement="bottom" [ngbTooltip]="solutionFixStatus" (click)="changeTooltip(npdata.postId);$event.stopPropagation();"></span></span>
                                                                        <span *ngIf="(npdata.postStatus != '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != npdata.userId)"><span title="Post Status" class=" cursor-pointer icon icon-thread-bstatus{{npdata.postStatus}} " tooltipClass="post-submit-tooltip"  container="body" triggers="click" [autoClose]="true" placement="bottom" [ngbTooltip]="solutionFixStatus" (click)="$event.stopPropagation();"></span></span>
                                                                        <span *ngIf="((closeStatus == 1) || ((userId != threadUserId && !specialOwnerAccess && userId != npdata.userId) || (userId != threadUserId && !specialOwnerAccess && userId == npdata.userId) || ((this.userId == this.threadUserId || specialOwnerAccess) && userId == npdata.userId)))" title="Post Status" class="icon icon-thread-bstatus{{npdata.postStatus}}" ></span>  
                                                                        <div class="manual-tt-outer" *ngIf="npdata.postStFlag && (npdata.postStatus == '0' && closeStatus == 0 && (this.userId == this.threadUserId || specialOwnerAccess) && this.userId != npdata.userId)">
                                                                            <div class="manual-tt">
                                                                                <div class="arrow-up"></div>
                                                                                <div class="innerDiv">
                                                                                    <span>Tap bulb to change fix status</span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>                                                            
                                                                    <ng-template #solutionFixStatus>
                                                                        <div *ngIf="threadOwner" class="thread-owner-reply">   
                                                                            <div class="display-table label-tt-cont" (click)="setSolutionStatus('1', npdata.postId, npdata.postStatus, 'nested-reply', npdata.parentPostId); $event.stopPropagation();"  >
                                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Fixed the Problem</span>
                                                                            </div>
                                                                            <div class="display-table label-tt-cont" (click)="setSolutionStatus('2',npdata.postId, npdata.postStatus, 'nested-reply', npdata.parentPostId); $event.stopPropagation();" >
                                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/possible-fix.png"></span>
                                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Helpful/Possible Fix</span>
                                                                            </div>
                                                                            <div class="display-table label-tt-cont" (click)="setSolutionStatus('3',npdata.postId, npdata.postStatus, 'nested-reply', npdata.parentPostId); $event.stopPropagation();" >
                                                                                <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/did-not-fix.png"></span>
                                                                                <span class="display-tablecell label-tt-cont-rt cursor-pointer">Did not fix the problem</span>
                                                                            </div>
                                                                        </div>                                                                
                                                                    </ng-template>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                    <!--div *ngIf="npdata.remindersData!=''">
                                                        <div class="reminder-view mTop">
                                                            <div class="reminder-row" *ngFor="let prdata of npdata.remindersData;" >
                                                                <p *ngIf="prdata.title != ''" class="reminder-title">{{prdata.title}}</p>
                                                                <div class="reminder-date"><img src="assets/images/thread-detail/thread-view-reminder.png"> <span>Reminder sent on {{prdata.createdOn}}</span></div>                                                                                               
                                                            </div>
                                                        </div> 
                                                    </div-->                                            
                                                </div>
                                            </div>
                                        </div> 
                                        <div *ngIf="!npdata.postView" class="post-edit" > 
                                            <div class="nested-reply-div padding-top-20">  
                                            <div class="post-new post-reply-new">
                                                
                                                    <div class="thread-head post-head display-table">
                                                        <div class="display-tablecell thread-head-col1 post-head-col1">
                                                            <div class="display-table">
                                                                <div class="display-tablecell">
                                                                    <div class="th-head-img" (click)="taponprofileclick(npdata.userId)">
                                                                        <img class="th-img" [src]="npdata.profileImage" onerror="this.src='assets/images/thumb_profile_image.png'" />
                                                                    
                                                                        <!--span (click)="taponprofileclick(npdata.userId)" class="rounded-circle cursor-pointer" [ngStyle]="{'background-image': 'url(' + npdata.profileImage + ')'}"></span-->
                                                                        <span class="availability-status availability-status{{npdata.availability}}"></span>
                                                                    </div>                            
                                                                </div>
                                                                <div class="display-tablecell th-head-title">
                                                                    <span class="th-head-text1 th-head-inline cursor-pointer" (click)="taponprofileclick(npdata.userId)"><span class="profile-topbadge-user-pview2" *ngIf="npdata.badgeTopUser"> <img  src="assets/images/thread/crownicon.svg"/></span>{{npdata.userName}}</span>
                                                                    <span class="th-head-text2 th-head-inline new-head-text2">{{npdata.userRoleTitle}}</span>                                                    
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="display-tablecell post-head-col2">
                                                            <div class="post-button post-button-white cursor-pointer" (click)="cancelPostAction(npdata.postId,'nested-reply',npdata.parentPostId)">
                                                                <span class="post-btn-text cancel-btn-text cursor-pointer">Cancel</span>
                                                                <img class="post-btn-img cancel-btn-img cursor-pointer" src="assets/images/parts/cancel-icon.png" >
                                                            </div> 
                                                            <div *ngIf="!postSaveButtonEnable" class="post-button post-button-red setOpacity3">
                                                                <span class="post-btn-text">Save</span>
                                                                <img class="post-btn-img" src="assets/images/profile/profile-save.png">
                                                            </div>
                                                            <div *ngIf="postSaveButtonEnable && !techSubmmitFlag && !msTeamAccessMobile" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="right-top" [ngbTooltip]="postSaveContent">
                                                                <span class="post-btn-text cursor-pointer">Save</span>
                                                                <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                            </div>                                                    
                                                            <div *ngIf="postSaveButtonEnable && techSubmmitFlag" class="post-button post-button-red cursor-pointer" (click)="setPostType('Comment', '0',npdata.postId,'nested-reply-edit',npdata.parentPostId)">
                                                                <span class="post-btn-text cursor-pointer">Save</span>
                                                                <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                            </div>
                                                            <div *ngIf="postSaveButtonEnable && !techSubmmitFlag && msTeamAccessMobile cursor-pointer" class="post-button post-button-red" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="left-top" [ngbTooltip]="postSaveContent">
                                                                <span class="post-btn-text cursor-pointer">Save</span>
                                                                <img class="post-btn-img cursor-pointer" src="assets/images/profile/profile-save.png">
                                                            </div>
                                                            <ng-template #postSaveContent>
                                                                <div *ngIf="postTypeAccess" class="thread-owner-reply">
                                                                    <label class="label-tt-head">Select your Post type</label>
                                                                    <div [ngClass]="{ 'selected-tt-cont' : npdata.postType == 'Comment' || npdata.postType == 'comment' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',npdata.postId,'nested-reply-edit',npdata.parentPostId)"  >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/post-reply.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Reply</span>
                                                                    </div>
                                                                    <div [ngClass]="{ 'selected-tt-cont' : npdata.postStatus == '0' && (npdata.postType == 'Fix' || npdata.postType == 'fix' ) }" *ngIf="adminUserNotOwner" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',npdata.postId,'nested-reply-edit',npdata.parentPostId)" >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                                    </div> 
                                                                    <div [ngClass]="{ 'selected-tt-cont' : npdata.postStatus == '1' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '1',npdata.postId,'nested-reply-edit',npdata.parentPostId)"  >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Confirmed Fix</span>
                                                                    </div>
                                                                    <div [ngClass]="{ 'selected-tt-cont' : npdata.postStatus == '2' }" class="display-table label-tt-cont cursor-pointer " (click)="setPostType('Fix', '2',npdata.postId,'nested-reply-edit',npdata.parentPostId)" >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/possible-fix.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Possible Fix</span>
                                                                    </div>
                                                                </div>
                                                                <div *ngIf="!postTypeAccess" class="thread-other-reply">
                                                                    <label class="label-tt-head">Are you posting a Reply or a Proposed Fix?</label>
                                                                    <div [ngClass]="{ 'selected-tt-cont' : npdata.postType == 'Comment' || npdata.postType == 'comment' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',npdata.postId,'nested-reply-edit',npdata.parentPostId)" >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/post-reply.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Reply</span>
                                                                    </div>
                                                                    <div  [ngClass]="{ 'selected-tt-cont' : npdata.postType == 'Fix' || npdata.postType == 'fix' }" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',npdata.postId,'nested-reply-edit',npdata.parentPostId)" >
                                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                                    </div>                                                   
                                                                </div>
                                                            </ng-template>
                                                        </div>                                        
                                                    </div>
                                                    <div class="post-new-cont">                                                
                                                        <!--<div class="post-error-msg" *ngIf="submitted1 && f1.postEditDesc.errors">Enter Reply</div>-->
                                                        <div class="post-desp-div">
                                                            <!--<textarea matInput class="post-desp" placeholder="Enter Reply" formControlName="postEditDesc" [ngModel]="postEditDesc" autocomplete="off" maxlength="{{descMaxLen}}" (ngModelChange)="changePostDesc($event,'edit')"></textarea>-->
                                                            <!--p-editor placeholder="Enter Reply" #postEditEditor [(ngModel)]="postEditDesc" (onTextChange)="changePostDesc($event,'edit')" [style]="{'height': '180px'}">
                                                                <p-header>
                                                                    <span class="ql-formats">
                                                                        <button class="ql-bold" aria-label="Bold"></button>
                                                                        <button class="ql-italic" aria-label="Italic"></button>
                                                                        <button class="ql-underline" aria-label="Underline"></button>
                                                                    
                                                                        <select title="Text Color" class="ql-color" defaultValue="rgb(0, 0, 0)">
                                                                        <option *ngFor="let c of textColorValues" value="{{c.color}}" label="{{c.color}}"></option>
                                                                        </select>
                                                                        <button class="ql-list" value="ordered"></button>
                                                                        <button class="ql-list" value="bullet"></button>
                                                                        <select title="Text Alignment" class="ql-align" >
                                                                            <option selected>Gauche</option>
                                                                            <option value="center" label="Center"></option>
                                                                            <option value="right" label="Right"></option>
                                                                            <option value="justify" label="Justify"></option>
                                                                        </select>                              
                                                                    </span>
                                                                </p-header>
                                                            </p-editor-->
                                                            <ckeditor placeholder="Enter reply" [editor]="Editor" [config]="configCke"
                                                            (change)="changePostDesc($event,'edit')"   (drop)="dropEvent($event,'edit-reply')"
                                                            [style]="{'height': '180px', 'width' : '300px'}" 
                                                            [(ngModel)]="postEditDesc"></ckeditor>
                                                        </div>
                                                        <div class="attachment-row ">
                                                            <div class="post-error-msg post-link-error" *ngIf="posteditServerError">{{postEditServerErrorMsg}}</div>
                                                            <app-file-attachment *ngIf="editPostUpload" class="attachment-file" [action]="manageAction" [apiData]="postEditApiData" [attachmentItems]="npdata.attachmentItems" [postData]="post" (uploadedItems)="editAttachments($event)"></app-file-attachment>
                                                            <app-attachment-view *ngIf="npdata.attachments.length > 0" [action]="npdata.EditAttachmentAction" [access]="pageAccess" [attachments]="npdata.attachmentItems" (attachmentAction)="attachmentAction($event)"></app-attachment-view>
                                                        </div>
                                                    </div>  
                                            
                                            </div>
                                            </div>
                                        </div>                                                        
                                    </div>
                                    <div class="post-div-col post-div-right thread-detail-scroll-to scrollbar scrollbar-primary thin" [ngClass]="{ 'setOpacity3' : npdata.postLoading }">
                                        <div class="edit-history-div" *ngIf="npdata.isEdited=='1'">
                                            <div class="table-row2">
                                                <div class="problem-row setPaddingTop1">
                                                    <div class="problem-col-lt thread-history-date"></div>
                                                    <div class="problem-col-rt w86">
                                                        <p class="edit-text1">Edited On</p>
                                                        <p class="edit-text2">{{npdata.editHistory[npdata.editHistory.length-1].updatedOnNew}}</p>      
                                                    </div> 
                                                </div>
                                                <div class="problem-row setPaddingTop2">
                                                    <div class="problem-col-lt thread-history-edituser"><span class="thread-history-edituser-img rounded-circle" [ngStyle]="{'background-image': 'url(' + npdata.editHistory[npdata.editHistory.length-1].profileImage + ')'}"></span></div>
                                                    <div class="problem-col-rt w86">
                                                        <p class="edit-text1">Edited By</p>
                                                        <p class="edit-text2">{{npdata.editHistory[npdata.editHistory.length-1].userName}}</p>      
                                                    </div> 
                                                </div>
                                            </div>  
                                        </div>
                                    </div>
                                </div>
                            </div>  
                            <!-- empty div start----- Loading div  --->
                            <div class="post-div" *ngIf="post.postReplyLoading">
                                <div class="post-div-col post-div-left"> 
                                    <div class="post-view">
                                        <div class="post-view-paddBottom" >
                                            <div class="post-loader">
                                                <div class="post-loader-svg"></div>
                                            </div>
                                        </div>                                
                                    </div>                                                      
                                </div>
                                <div class="post-div-col post-div-right">&nbsp;</div>
                            </div>
                            <div *ngIf="post.remindersData!='' && post.deleteFlag == 0 ">
                                <div class="post-div" id="rpid-{{post.postId}}">
                                    <div class="post-div-col post-div-left"> 
                                        <div class="post-view reminder-view post-rview">                                            
                                            <div class="reminder-row" *ngFor="let prdata of post.remindersData;" >
                                                <p *ngIf="prdata.title != ''" class="reminder-title">{{prdata.title}}</p>
                                                <div class="reminder-date"><img src="assets/images/thread-detail/thread-view-reminder.png"> <span>Reminder sent on {{prdata.createdOn}}</span></div>                                                                                               
                                            </div>
                                        </div>
                                    </div>
                                    <div class="post-div-col post-div-right">&nbsp;</div>
                                </div>
                            </div>
                           <!-- <button (click)="taponDescription(post.contentDesc,post,i)">language Convert</button>
                        -->
                        </div>
                        <!-- empty div end----- Loading div  --->                      
                        <!-- empty div start----- Loading div  --->
                        <div class="post-div">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-view" *ngIf="postLoading">
                                    <div class="post-view-paddBottom">
                                        <div class="post-loader">
                                            <div class="post-loader-svg"></div>
                                        </div>
                                    </div>                                
                                </div>
                                <div class="post-view" *ngIf="!postLoading" [ngClass]="{'post-view-last': postDataLength>0 && closeStatus==1, 'hide': postDataLength==0 && closeStatus==1}">                                
                                    <div *ngIf="postError" class="th-error-div"><div class="error-msg">{{postErrorMsg}}</div></div> 
                                </div>                   
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div>
                        <!-- empty div end----- Loading div  --->  

                        <div class="post-div" *ngIf="!newPostLoad && closeStatus==0">
                            <div class="post-div-col post-div-left"> 
                                <div class="post-new">                                   
                                    <div class="thread-head post-head display-table">
                                        <div class="display-tablecell thread-head-col1 post-head-col1">
                                            <div class="display-table">
                                                <div class="display-tablecell">
                                                    <div class="th-head-img" (click)="taponprofileclick(userId)">
                                                        <img class="th-img" [src]="loginUserProfileImg" onerror="this.src='assets/images/thumb_profile_image.png'" />
                                                                    
                                                        <!--span class="rounded-circle cursor-pointer" (click)="taponprofileclick(userId)" [ngStyle]="{'background-image': 'url(' + loginUserProfileImg + ')'}"></span-->
                                                        <span class="availability-status availability-status{{loginUserAvailability}}"></span>
                                                    </div>                            
                                                </div>
                                                <div class="display-tablecell th-head-title">
                                                    <span class="th-head-text1 th-head-inline cursor-pointer" (click)="taponprofileclick(userId)">{{loginUsername}}</span>
                                                    <span class="th-head-text2 th-head-inline new-head-text2">{{loginUserRole}}</span>                                                    
                                                </div>
                                            </div>
                                        </div>
                                        <div class="display-tablecell post-head-col2">
                                            <!--div *ngIf="techSupportFlag && presetFlag"  (click)="openPresetPOPUP('view')" class="post-button post-button-black cursor">
                                                <span class="post-btn-text">Presets</span>
                                                <span class="new-close-img"><img class="post-btn-img" src="assets/images/preset/list-preset-icon.png"></span>
                                            </div-->
                                            <div *ngIf="noCloseAccess" class="post-button post-button-black setOpacity3" (click)="checkCloseAccess()">
                                                <span class="post-btn-text">Close {{headerTitle}}</span>
                                                <span class="new-close-img"><img class="post-btn-img" src="assets/images/thread-detail/thread-close-white.png"></span>
                                            </div>                                            
                                            <div *ngIf="(techSubmmitFlag || closeAccess) && !continueButtonEnable && !noCloseAccess" class="post-button post-button-black setOpacity3">
                                                <span class="post-btn-text">Close {{headerTitle}}</span>
                                                <span class="new-close-img"><img class="post-btn-img" src="assets/images/thread-detail/thread-close-white.png"></span>
                                            </div>
                                            <div *ngIf="(techSubmmitFlag || closeAccess) && continueButtonEnable && !noCloseAccess" class="post-button post-button-black cursor-pointer" (click)="closeThreadConfirm()">
                                                <span   class="post-btn-text {{escalationStatusViewClass}}">Close {{headerTitle}}</span>
                                                <span class="new-close-img"><img class="post-btn-img" src="assets/images/thread-detail/thread-close-white.png"></span>                                                
                                            </div>
                                            <div *ngIf="noReplyAccess"  class="post-button post-button-red setOpacity3" (click)="checkReplyAccess()">
                                                <span class="post-btn-text">Post</span>
                                                <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>
                                            </div>
                                            <div *ngIf="!postButtonEnable && !noReplyAccess"  class="post-button post-button-red setOpacity3" (click)="checkReplyAccess()">
                                                <span class="post-btn-text">Post</span>
                                                <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>
                                            </div>
                                            <div *ngIf="postButtonEnable && !techSubmmitFlag && !msTeamAccessMobile && !noReplyAccess" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="right-top" [ngbTooltip]="postSubmitContent">
                                                <span class="post-btn-text">Post</span>
                                                <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>                                              
                                            </div>
                                            <div *ngIf="postButtonEnable && techSubmmitFlag && !noReplyAccess" class="post-button post-button-red cursor-pointer" (click)="setPostType('Comment', '0',0,'new')">
                                                <span class="post-btn-text">Post</span>
                                                <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>
                                            </div>
                                            <div *ngIf="postButtonEnable && !techSubmmitFlag && msTeamAccessMobile && !noReplyAccess" class="post-button post-button-red cursor-pointer" tooltipClass="post-submit-tooltip" container="body" triggers="click" [autoClose]="true" placement="left-top" [ngbTooltip]="postSubmitContent">
                                                <span class="post-btn-text">Post</span>
                                                <span class="new-post-img"><img class="post-btn-img" src="assets/images/thread-detail/new-post.png"></span>
                                            </div>
                                            <ng-template #postSubmitContent>
                                                <div *ngIf="postTypeAccess" class="thread-owner-reply">
                                                    <label class="label-tt-head">Select your Post type</label>
                                                    <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',0,'new')">
                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/post-comment.png"></span>
                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Comment</span>
                                                    </div>
                                                    <div *ngIf="adminUserNotOwner" class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',0,'new')" >
                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img width="34" height="34" src="assets/images/thread-detail/proposed-fix.png"></span>
                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                    </div> 
                                                    <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '1',0,'new')"  >
                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/confirmed-fix.png"></span>
                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Confirmed Fix</span>
                                                    </div>
                                                    <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '2',0,'new')" >
                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/possible-fix.png"></span>
                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Possible Fix</span>
                                                    </div>                                                       
                                                </div>
                                                <div *ngIf="!postTypeAccess" class="thread-other-reply">
                                                    <label class="label-tt-head">Are you posting a Comment or a Proposed Fix?</label>
                                                    <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Comment', '0',0,'new')" >
                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/post-comment.png"></span>
                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Comment</span>
                                                    </div>
                                                    <div class="display-table label-tt-cont cursor-pointer" (click)="setPostType('Fix', '0',0,'new')" >
                                                        <span class="display-tablecell label-tt-cont-lt cursor-pointer"><img src="assets/images/thread-detail/proposed-fix.png"></span>
                                                        <span class="display-tablecell label-tt-cont-rt cursor-pointer">Proposed Fix</span>
                                                    </div>                                                   
                                                </div>
                                            </ng-template>
                                        </div>                                        
                                    </div>
                                    <div class="post-new-cont" id="post-new-cont-id">                                            
                                        <div class="post-error-msg" *ngIf="emptyComment">Enter comment</div>
                                        <div class="post-desp-div">
                                            <!--textarea matInput class="post-desp" placeholder="Enter Reply" formControlName="postDesc" [ngModel]="postDesc" autocomplete="off" maxlength="{{descMaxLen}}" (ngModelChange)="changePostDesc($event,'new')"></textarea>-->
                                            <!--p-editor #postNewEditor placeholder="Enter comment" [(ngModel)]="postDesc" (onTextChange)="changePostDesc($event,'new')" [style]="{'height': '180px'}">
                                                <p-header>
                                                    <span class="ql-formats">
                                                        <button class="ql-bold" aria-label="Bold"></button>
                                                        <button class="ql-italic" aria-label="Italic"></button>
                                                        <button class="ql-underline" aria-label="Underline"></button>
                                                    
                                                        <select title="Text Color" class="ql-color" defaultValue="rgb(0, 0, 0)">
                                                        <option *ngFor="let c of textColorValues" value="{{c.color}}" label="{{c.color}}"></option>
                                                        </select>
                                                        <button class="ql-list" value="ordered"></button>
                                                        <button class="ql-list" value="bullet"></button>
                                                        <select title="Text Alignment" class="ql-align" >
                                                            <option selected>Gauche</option>
                                                            <option value="center" label="Center"></option>
                                                            <option value="right" label="Right"></option>
                                                            <option value="justify" label="Justify"></option>
                                                        </select>                                                         
                                                    </span>
                                                </p-header>
                                            </p-editor-->
                                            <p-progressBar *ngIf="editorProgressUpload==1" [style]="{'height': '6px','width':'300px','text-align':'center','margin':'10px'}" mode="indeterminate"></p-progressBar>
                                            <ckeditor placeholder="Enter comment" [editor]="Editor" [config]="configCke"
                                            (change)="changePostDesc($event,'new')" (drop)="dropEvent($event,'newComment')"
                                            [style]="{'height': '180px'}" 
                                            (change)="changePostDesc($event,'new')" 
                                            
                                            [(ngModel)]="postDesc"></ckeditor>
                                        </div>
                                        <div class="clear">
                                        </div>
                                        <div *ngIf="enableTagFlag && closeStatus!=1">
                                        
                                        <div class="tag-users view-tag-users cursor" (click)="tapontagUsers('comment')">
                                            <div>
                                                <div class="drop-col split-col">
                                                    <span class="split-icon "></span>
                                                </div>
                                            <p-dropdown [disabled]="true"  placeholder="Tag Users"   class="input-with-icon-inside-select mat-typography" appendTo="body"  ></p-dropdown>
                                            </div>
                                        </div>
                                        <div class="tag-users-list cursor">
                                            <div *ngIf="commentAssignedUsersList && commentAssignedUsersPopupResponse" class="selected-users selected-users-bg" [ngClass]="{'hide': commentAssignedUsersList.length < 1}">
                                                <ul style="max-height: 76px;" class="overflow-auto p-0">
                                                    <li *ngFor="let u of commentAssignedUsersList; let i = index;" class="p-0 mt-3">
                                                        <span class="img" [ngStyle]="{'background-image': 'url(' +u.img+ ')'}">
                                                            <span class="cursor remove" (click)="removeE1scSelection(u.id,'comment')"></span>
                                                        </span>
                                                        <span class="name text-left ml-4" title="{{u.name}}">{{u.name}}</span>
                                                    </li>
                                                </ul>
                                            </div>
                                            </div>                                            
                                    </div>
                                        <div class="attachment-row ">
                                            <div class="post-error-msg post-link-error" *ngIf="postServerError">{{postServerErrorMsg}}</div>
                                            <app-file-attachment *ngIf="postUpload" class="attachment-file" [action]="manageAction" [apiData]="postApiData" (uploadedItems)="attachments($event)"></app-file-attachment>
                                            <!-- Attachment List-->
                                            <app-attachment-view *ngIf="presetAttachmentsFlag" [action]="presetAttachmentAction" [access]="presetPageAccess" [attachments]="presetAttachments" (attachmentAction)="presetsAttachmentAction($event)"></app-attachment-view>
                                            <!-- Attachment List-->
                                        </div>
                                        
                                    </div>                                     
                                </div>
                            </div>
                            <div class="post-div-col post-div-right new-post-scroll-hide">&nbsp;</div>
                        </div>  

                        <div class="post-div" *ngIf="!newPostLoad && closeStatus==1">
                            <div class="post-div-col post-div-left"> 
                                <div class="close-div" style="margin-top:30px">
                                    <img class="close-div-icon" src="assets/images/thread-detail/thread-closed-white.png">
                                    <span class="close-div-text">{{headerTitle}} Closed on {{closedDate}}</span>
                                </div>
                            </div>
                            <div class="post-div-col post-div-right">&nbsp;</div>
                        </div> 
                    </div>      
                  </div>
            </div> 
        </div>
        
        <div *ngIf="!msTeamAccess" class="th-outer-col th-outer-col-3" [ngClass]="{'col-expand': rightPanel && !newLeftCol, 'col-collapse': !rightPanel && !newLeftCol, 'col-expand-rwidth': rightPanel && newLeftCol, 'col-collapse-rwidth': !rightPanel && newLeftCol}">
            <div class="cust-right-panel" [ngClass]="{'right-panel-expand': rightPanel, 'right-panel-collapse': !rightPanel}">
                <app-domain-members [disableRightPanel]="disableRightPanel"></app-domain-members>
            </div>
        </div>             
        
    </div>
        
</div>
</div>

<p-dialog header="Select your feedback" [modal]="true" [draggable]="false" [resizable]="false"  [(visible)]="visibledealerClosePopup" styleClass="p-fluid feedbackoptionssupport">
  <div style="width: 100%;">
    <div *ngFor="let feedbackList of supportFeedbackList;" class="feedback-status-main-content" >
        
            <div [style.background-color]="feedbackList.bgColor" class="inner-feedback-content cursor feedback-id{{feedbackList.id}}" (click)="feedbackSubmit(feedbackList.id)">
                <div class="feedback-status-name" style=" color: #fff;font-size: 14px;padding-top: 10px;">
                    <div class="text-center text-content-feedback-img"><img src="assets/images/thread/{{feedbackList.imgClass}}"></div>
                    <div class="text-center text-content-feedback-name">
                    {{feedbackList.name}}
                </div>    
                </div>
            </div>
           
        
        </div>
        </div>
</p-dialog>

<p-toast position="top-right"  key="c" (onClose)="onReject(incrementToast)">
    <ng-template let-message pTemplate="message">
        <div (click)="tapontoast(message.summary)" class="p-flex cursor push-message-toast  p-flex-column" style="flex: 1">
            <div class="row col-lg-12 col-md-12 col-sm-12 main-content" >
               <div class="col-lg-3 col-md-3 col-sm-3 bg-toast-message-type">
                <div class="img-notification">
                  
                <img *ngIf="(message.summary.displayType=='1' || message.summary.displayType=='2') && message.summary.subType!=5" src="assets/images/notifications/group-thread-toast.png">
                <img *ngIf="message.summary.displayType=='3'" src="assets/images/notifications/group-announcement-push.png">
                <img *ngIf="message.summary.displayType=='7'" src="assets/images/notifications/group-document-toast.png">
                <img *ngIf="message.summary.displayType=='4'" src="assets/images/notifications/group-1.png">
                <img *ngIf="message.summary.displayType=='1' && message.summary.subType=='5'" src="assets/images/notifications/dispatch-toast.png">
              </div> 
                 </div>
              <div class="col-lg-9 col-md-9 col-sm-9 sub-content"> 
              <div *ngIf="message.summary.displayType=='4'" class="summery-heading">{{message.summary.title}}</div>
                <div *ngIf="message.summary.displayType=='4'" class="inner-content-text" [innerHTML]="message.detail"></div>
                <div *ngIf="message.summary.displayType!='4'"  [innerHTML]="message.detail"></div>
            </div>
              </div>
            
        </div>
    </ng-template>
</p-toast>