<div *ngIf="viewDocument" class="custom-modal modal-container" id="wrapper">    
    <div class="modal-header view-modal-header">
        <div class="view-modal-title">
            <!--<img src="assets/images/training-popup-header-icon.png" >-->
            <span class="view-modal-title-text text-center">{{headTitle}}</span>            
        </div>
        <div class="view-modal-actions" >
            <div *ngIf="readUpdate" class="read-ann-div" (click)="updateAccouncement()"><span class="read-ann-text"> Iâ€™ve read this announcement</span></div>
            <div *ngIf="isActive" class="view-more-actions cursor" title="More" tooltipClass="post-submit-tooltip more-tooltip more-tooltip-new" triggers="click" [autoClose]="true"
                placement="bottom-right" [ngbTooltip]="more">
                <img src='assets/images/detail-view-more-icon.png' alt=''/><span></span>
            </div>
                <ng-template #more>
                <div class="thread-owner-reply cursor" *ngIf="editAccess" (click)="threadHeaderAction('edit')">                  
                    <div class="label-tt-cont moreDiv">
                    <span class="label-tt-cont-lt moreDivLt"><img src="assets/images/edit.png"></span>
                    <span class="label-tt-cont-rt moreDivRt">
                        <p class="more-cont">Edit</p>
                    </span>
                    </div>
                </div>
                <div class="thread-owner-reply cursor" *ngIf="deleteAccess" (click)="threadHeaderAction('delete')">                  
                    <div class="label-tt-cont moreDiv">
                    <span class="label-tt-cont-lt moreDivLt"><img src="assets/images/delete.png" ></span>
                    <span class="label-tt-cont-rt moreDivRt">
                        <p class="more-cont">Delete</p>
                    </span>
                    </div>
                </div>  
                <div class="thread-owner-reply cursor" *ngIf="deleteAccess" (click)="threadHeaderAction('delete')">                  
                    <div class="label-tt-cont moreDiv">
                    <span class="label-tt-cont-lt moreDivLt"><img src="assets/images/delete.png" ></span>
                    <span class="label-tt-cont-rt moreDivRt">
                        <p class="more-cont">Remove &amp; Archive</p>
                    </span>
                    </div>
                </div>
                <div class="thread-owner-reply cursor" (click)="threadHeaderAction('copylink')">                  
                    <div class="label-tt-cont moreDiv">
                    <span class="label-tt-cont-lt moreDivLt"><img src="assets/images/detail-view-copy-icon.png" ></span>
                    <span class="label-tt-cont-rt moreDivRt">
                        <p class="more-cont">Copy Link</p>
                    </span>
                    </div>
                </div> 
                </ng-template>
            <span class="cursor close-btn" (click)="closeModal()">
                <img src="assets/images/list-close.png" alt="Close" />
            </span>
        </div>
    </div>
    <div class="modal-body view-modal-body">
        <div [style.height.px]="innerHeight">
            <!--div style="max-height: 87vh"-->
            <div >  
                <div *ngIf="loading">
                    <div class="loader"><div class="post-loader-svg"></div></div>
                </div>   
                <div *ngIf="!loading" >
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 no-padding row no-margin">
                        <div class="thread-detail-section thread-detail-section-other">
                            <div class="th-outer-col th-outer-col-2" style="display:block;width:100%;">
                                <div [style.height.px]="innerHeight - 5">
                                    <!--div style="max-height: 85vh;"-->
                                    <div id="documentView" class="ps thread-post" [perfectScrollbar]="sconfig" >                      
                                        <div #tdpage class="thread-detail-page" [ngClass]="{ 'opacity': opacityFlag}" >  
                                            <div class="thread-detail-div">
                                                <div class="thread-detail-div-col thread-detail-div-left">
                                                    <div class="">                                                        
                                                        <div class="thread-content">
                                                            <div class="display-table table-row1 doc-table-row1">
                                                               <div class="display-tablecell table-col-1-1 thread-img-div {{styleName}}">
                                                                    <span class="thread-img">
                                                                        <span *ngIf="threadViewData.contentType == 'announcements'" class="thread-bg ann-bg"></span>
                                                                    </span>
                                                                </div>
                                                                <div class="display-tablecell table-col-1-2">
                                                                    <div class="thread-title">{{threadViewData.title}}</div>                        
                                                                    <div class="table-row2"> 
                                                                        <div class="problem-row">  
                                                                            <div class="problem-col-lt" *ngIf="threadViewData.urgencyLevelText" > 
                                                                                <span class="ann-urgent middle-continer-section"><img src="assets/images/landing-page/announcement-urgent.png"></span>
                                                                            </div>  
                                                                        </div>                                   
                                                                    </div>
                                                                    
                                                                    <div class="thread-mm-bottom" *ngIf="expDate!=''"></div>
                                                                    <div class="thread-use-row" *ngIf="expDate!=''">
                                                                        <div class="thread-use-col widthauto">
                                                                            <span class="use-col-lt ex-date"></span>
                                                                            <span class="use-col-rt">
                                                                                <p class="use-col-head">Expiration Date</p>
                                                                                <p class="use-col-cont">{{expDate}}</p>
                                                                            </span>
                                                                        </div>
                                                                    </div> 
                                                                                                              
                                                                </div>
                                                            </div>
                                                            <div class="table-row2"> 
                                                                <div class="problem-row setPaddingTop3">                  
                                                                    <div class="problem-col-lt ann-problem"></div>
                                                                    <div class="problem-col-rt">
                                                                        <p class="problem-col-head problem-col-head-color">Description</p>                                                                                      
                                                                    </div> 
                                                                    <div class="clear"></div>
                                                                    <div class="problem-col-lt" style="width: 27px;"></div>
                                                                    <div class="problem-col-rt">
                                                                        <div *ngIf="threadViewData.description != ''" class="doc-description" [innerHTML]="threadViewData.description"></div> 
                                                                        <div *ngIf="threadViewData.description == ''" class="doc-description"><i style="color:#a7a7a7;">NA</i></div> 
                                                                    </div>  
                                                                </div>                        
                                                            </div>
                                                            <div class="table-row2 hide">
                                                                <div class="problem-row setPaddingLeft1">  
                                                                    <div class="problem-row setPadding" *ngIf="taglength>0">
                                                                        <div class="problem-col-lt tag doc-tag-lt"><img src='assets/images/thread-detail/tag.svg' alt='' onload='SVGInject(this)' /></div>
                                                                        <div class="problem-col-rt w90">
                                                                            <p class="problem-col-head doc-problem-col-head">Tag<span *ngIf="tagData.length > 1">s</span></p>
                                                                            <div class="tag-cont-div doc-tag-cont-div" *ngFor="let item of tagData;"> 
                                                                                <span class="tag-cont btn tag">{{item.name}}</span>                                       
                                                                            </div>
                                                                        </div> 
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="table-row2 table-row3 doc-table-row3">
                                                               
                                                                <div class="thread-detail-widget main-contaier" *ngIf="!attachmentLoading">
                                                                    <p-accordion class="custom-accordion flat-custom-accordion thread-detail-accordion" [multiple]="true">
                                                                        <p-accordionTab class="comments" [transitionOptions]="'100ms'" [selected]="true">
                                                                            <p-header class="header">
                                                                                <span class="header-img">
                                                                                    <img src="assets/images/thread-detail/attachments-white.png">
                                                                                </span>
                                                                                <span class="header-text">
                                                                                    Attachments
                                                                                </span>
                                                                            </p-header>                               
                                                                            <!-- Attachment List-->
                                                                            <app-attachment-view *ngIf="!attachmentLoading" [loading]="attachmentLoading" [action]="action" [attachments]="attachments"></app-attachment-view>
                                                                            <!-- Attachment List-->
                                                                        </p-accordionTab>
                                                                    </p-accordion>
                                                                </div>

                                                                <!-- System Information -->
                                                                <div class="reference-info">
                                                                    <mat-accordion [multi]="true" #accordion="matAccordion">
                                                                        <mat-expansion-panel class="{{panel.class}}"
                                                                        [disabled]="panel.isDisabled"
                                                                        [expanded]="panel.isExpanded"
                                                                        [hideToggle]="false"
                                                                        (opened)="beforeParentPanelOpened(panel, emptyList)"
                                                                        (closed)="beforeParentPanelClosed(panel, emptyList)"
                                                                        (afterCollapse)="afterPanelClosed()"
                                                                        (afterExpand)="afterPanelOpened()"
                                                                        *ngFor="let panel of referenceAccordion"
                                                                        #mapanel="matExpansionPanel">
                                                                            <mat-expansion-panel-header>
                                                                                <mat-panel-title>
                                                                                <b>{{panel.title}}</b>
                                                                                </mat-panel-title>
                                                                            </mat-expansion-panel-header>
                                                                                <div class="app-accord">
                                                                                    <app-system-info-view [systemInfo]="systemInfo"></app-system-info-view>
                                                                                </div>
                                          
                                                                        </mat-expansion-panel>
                                                                    </mat-accordion>
                                                                </div>
                                                                                                                                
                                                            </div>                    
                                                                                                                       
                                                            <div class="table-row4 cursor-pointer" (click)="threadDashboarUserList('announcement-dashboard','views',threadViewData.resourceID,'1')"> 
                                                                <div class="display-table row4"> 
                                                                    <div class="display-tablecell row4-col1">
                                                                        <div class="icons-div">                                                        
                                                                            <span title="Like" class="icon icon-like cursor-pointer" (click)="socialAction('like', threadViewData.likeStatus); $event.stopPropagation();" [ngStyle]="{'background-image': 'url('+threadViewData.likeImg+')'}"></span>
                                                                            <span class="icon-count-text">{{threadViewData.likeCountVal}}</span>
                                                                        </div>
                                                                        <!--div class="icons-div">                                                       
                                                                            <span title="Pin" class="icon icon-pin cursor-pointer" (click)="socialAction('pin', pinStatus); $event.stopPropagation();" [ngStyle]="{'background-image': 'url('+pinImg+')'}"></span>
                                                                            <span class="icon-count-text">{{pinCountVal}}</span>
                                                                        </div-->     
                                                                        <div class="icons-div ">
                                                                            <span title="View" class="icon icon-view"></span>
                                                                            <span class="icon-count-text" *ngIf="threadViewData.viewCount>0">{{threadViewData.viewCount}}</span>
                                                                            <span class="icon-count-text" *ngIf="threadViewData.viewCount==0">-</span>
                                                                        </div>                            
                                                                    </div>
                                                                    <div class="display-tablecell row4-col2">
                                                                        <div class="icons-div icon-left">
                                                                            <span title="Share" class="icon icon-thread-share "></span>                                
                                                                        </div>                                                                     
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                     

                                                    </div>
                                                </div>                                                
                                            </div>                                         
                                        </div>      
                                      </div>
                                </div> 
                            </div>  
                        </div>                                                                  
                    </div>
                </div>                
                
            </div>
        </div>
    </div>
</div>
<p-dialog [(visible)]="copiedModal" [modal]="true" [draggable]="false" [resizable]="true" class="copied-modal">
    <div class="text-center copied-txt">Copied</div>
  </p-dialog>


