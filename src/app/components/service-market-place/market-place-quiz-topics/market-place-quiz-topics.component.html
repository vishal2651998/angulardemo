<div id="header" *ngIf="!msTeamAccess">
  <app-product-header *ngIf="!headerFlag" [pageData]="headerData" (search)="applySearch('emit', $event)"></app-product-header>
  <app-product-header *ngIf="headerFlag" [pageData]="headerData" (search)="applySearch('emit', $event)"></app-product-header>
</div>
<div class="left-section">
  <div class="first-left-width">
    <nav id="nav-sidebar">
      <app-marketplace-sidebar [activeMenuItem]="'market-place/quiz-topics'" accessModule="{{bodyClass}}"></app-marketplace-sidebar>
    </nav>
  </div>
</div>
<div class="prob-index split-sec1 right-section">
  <div class="container-fluid">
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" style="padding-left: 8px; padding-top: 8px;">
      <div class="flex-align-center">
        <div class="ellipse">
          <img width="10px" height="10px" src="assets/images/service-provider/filter-icon.png" />
        </div>
        <img src="assets/images/service-provider/quiz-title.png" class="training-marketplace-quiz-head">
        <span class="marketplace-text-design">Quiz Topics</span>
      </div>
    </div>
      <div class="row col-lg-12 col-md-12 col-sm-12 landing-padding0 landing-margin0">
          <!--<div *ngIf="!msTeamAccess" class="threads-page-filter padding-right-class" [ngClass]="{'col col-lg-2  col-md-2 col-xl-2 col-sm-2': expandFlag, 'filter-show-hide': !expandFlag}">
              <div class="cbt-filter thread-filter" [ngClass]="{'filter-expand': expandFlag, 'filter-collapse': !expandFlag}">
                  <app-filter *ngIf="filterLoading" (toggle)="expandAction($event)" [filterOptions]="filterOptions" (filterAction)="applyFilter($event)"></app-filter>
                  <app-filter *ngIf="!filterLoading" (toggle)="expandAction($event)" [filterOptions]="filterOptions" (filterAction)="applyFilter($event)"></app-filter>
              </div>
          </div>-->
          <div [ngClass]="{'col col-lg-12 col-md-12 col-xl-12 col-sm-12': msTeamAccess, 'col col-lg-8 col-md-8 col-xl-8 col-sm-8': !msTeamAccess }" class="center-middle-width-container threads market-place-quiz">
              <div class="center-middle-width padding-common">
                  <div class="clear"></div>
                  <div class="probing-content cbt-content part-content part-content-threads-new">
                    <div class="col col-lg-12 col-md-12 col-xl-12 col-sm-12 landing-page thread-page-container card-parent-design-new" style="margin-top: 0 !important; margin-left: 10px !important;">
                      <!--<div class="flex-align-center margin-bottom-15px">
                        <div class="ellipse">
                          <img width="10px" height="10px" src="assets/images/service-provider/filter-icon.png" />
                        </div>
                        <img src="assets/images/service-provider/quiz-title.png" class="training-marketplace-head">
                        <span class="marketplace-text-design">Quiz Topics</span>
                      </div>-->
                      <div class="loading-small-screen-scroll trst" align="center" *ngIf="loading" ><img src="assets/images/loading.svg" alt="Loader" /></div>
                      <div class="ps" style="height: 100%" [perfectScrollbar]="sconfig" (scroll)="onScroll($event)">
                        <ngx-masonry class="masonry-item-container" [updateLayout]="updateMasonryLayout" [ordered]="true">
                          <div ngxMasonryItem id="{{topics.id}}" class="masonry-item custom-masonry-margin" data-masonry='{ "columnWidth": 200, "itemSelector": ".grid-item" }' *ngFor="let topics of topicData; let i = index">
                            <p-card [style]="{width: '100%'}" styleClass="p-card-shadow quiz-inner-card cursor-pointer"   (click)="goToListing(topics.id)">
                              <ng-template pTemplate="header">
                                <div class="new-style-changes">
                                  <img width="51px" height="59px" class="header-style-1" src="assets/images/service-provider/quiz-big.png">
                                </div>
                              </ng-template>
                              <div class="margin-bottom-10px" style="display: flex; justify-content: space-between; align-items: end;">
                                <span title="{{topics?.name}}" class="inner-card-heading">{{topics?.name}}</span>
                                <span *ngIf="topics.id && topics.id != '0'" class="ka-card-rt cursor-pointer" #menuTrigger="matMenuTrigger" [matMenuTriggerFor]="moreAction" (click)="$event.stopPropagation();"><span class="more-image-quiz"></span></span>
                                <mat-menu #moreAction="matMenu" backdropClass="ptabletmenu" class="folderActMenu CatMenu">
                                  <div class="part-menu">
                                    <ul class="more-actions more-actions-ca">
                                      <li (click)="this.copyTopic = false; openEditPopup(topics.id);" style="cursor: pointer;display: flex; align-items: center;padding: 0px 20px 5px;">
                                        <img style="margin-right: 10px;" width="15px" height="15px" src="assets/images/service-provider/edit.png" />
                                        <a style="cursor: pointer;">Edit</a>
                                      </li>
                                      <li (click)="this.copyTopic = true; openEditPopup(topics.id);" style="cursor: pointer;display: flex; align-items: center;padding: 5px 20px;">
                                          <img style="margin-right: 10px;" width="15px" height="15px" src="assets/images/service-provider/duplicate.png" />
                                          <a style="cursor: pointer;">Duplicate</a>
                                      </li>
                                      <li (click)="openDelete(topics)" style="cursor: pointer;display: flex; align-items: center;padding: 5px 20px;">
                                          <img style="margin-right: 10px;" width="14px" height="16px" src="assets/images/service-provider/trash.png" />
                                          <a style="cursor: pointer;">Delete</a>
                                      </li>
                                      <li style="cursor: pointer;display: flex; align-items: center;padding: 5px 20px 0px;">
                                        <img style="margin-right: 10px;" width="14px" height="12px" src="assets/images/service-provider/graphics.png" />
                                        <a style="cursor: pointer;">Update Graphic</a>
                                      </li>
                                    </ul>
                                  </div>
                                </mat-menu>
                              </div>
                              <div class="">
                                <span title="{{topics?.totalCount}} Questions" class="inner-card-description-3 margin-bottom-10px margin-right-5px">{{topics?.totalCount}} Questions</span>
                              </div>
                            </p-card>
                          </div>
                        </ngx-masonry>
                      </div>

                    </div>
                    <div align="center" class="thread-loading-text bottom-loading" *ngIf="loadingmarketplacemore"><img src="assets/images/landing-page/loading-more.svg" alt="Loader" /></div>
                  </div>
                </div>
            </div>
            <div *ngIf="!msTeamAccess" class="right-middle-width-container landing-padding0  col col-lg-2  col-md-2 col-xl-2 col-sm-2 padding-right-class">
                <div class="right-width-column padding-common">
                    <app-domain-members [disableRightPanel]="disableRightPanel" (toggle)="expandDomainAction($event)"></app-domain-members>
                </div>
            </div>
        </div>
    </div>
  </div>
<!-- <p-sidebar class="sidebar-cont" [(visible)]="actionFlag" [baseZIndex]="100" position="right" [dismissible]="false">
    <h1 style="font-weight: normal">
        <span class="truncate">{{manageTitle}}</span>
    </h1>
    <div class="action-form">
        <div class="col-12 no-padding">
            <div class="flex-justify-spacebetween">
                <label>
                    <img src="assets/images/service-provider/quiz.png" alt="quiz" width="19px" height="22px" style="margin-right: 6px;" />
                    <span class="topic-title">Topic Name</span>
                </label>
                <span class="required-font-style">Required</span>
            </div>
            <div class="p-inputgroup mr-2">
                <input type="text" pInputText class="custom-topic-input-1" (keyup)="checkTopicValue()" placeholder="Enter topic name" [(ngModel)]="topicValue">
            </div>
            <div class="error-msg-new" *ngIf="showTopicError && topicSubmitted">Topic is required</div>
        </div>
        <div class="service-form-row">
            <div class="action-buttons">
                <button pButton pRipple type="button" icon="pi pi-check" iconPos="right" label="{{buttonTitle}}"
                class="p-button-rounded button-save cursor left-0px" (click)="submitTopic()"></button>
                <button pButton pRipple type="button" icon="pi pi-times" iconPos="right" label="Cancel"
                class="p-button-rounded button-cancel cursor" (click)="actionFlag = false"></button>
            </div>
        </div>
    </div>
</p-sidebar> -->
<p-dialog [(visible)]="actionFlag" [modal]="true" [draggable]="false" [resizable]="true"
    class="dispatch-modal card-spacing">
    <ng-template pTemplate="header">
        <div class="w-100 mx-3" style="display: flex;align-items: center;justify-content: space-between;">
            <span style="font-size: 18px;font-weight: 500;">{{manageTitle}}</span>
        </div>
    </ng-template>
    <div class="action-form" style="margin-top: 25px;">
      <div class="col-12" style="padding: 0px;">
          <div class="p-inputgroup mr-2">
            <input type="text" pInputText class="custom-topic-input-1 custom-input-style" (keyup)="checkTopicValue()" placeholder="Enter topic name" [(ngModel)]="topicValue">
          </div>
          <div class="error-msg-new" *ngIf="showTopicError && topicSubmitted">Topic is required</div>
          <div class="error-msg-new" *ngIf="showServerTopicError">{{serverError}}</div>
      </div>
      <div class="service-form-row" style="margin-top: 25px;">
        <div class="action-buttons" style="display: flex; justify-content: center;">
          <div class="btn cancel custom-button-style-cancel" (click)="actionFlag = false">Cancel <img style="width: 10px;"
            src="assets/images/parts/cancel-icon.png" /></div>
          <div class="btn next publish disable custom-button-style-enable" (click)="submitTopic()">{{buttonTitle}} <i style="font-size: 14px;" class="pi pi-check"></i>
          </div>
        </div>
      </div>
    </div>
</p-dialog>
